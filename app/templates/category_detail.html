<!-- templates/category_detail.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{{ category.name }} | RGSU Wildberries</title>
    <style>
    /* === Стиль при наведении на ссылки пагинации === */
    .pagination-nav a:hover {
        background-color: #b33c3c; /* Темно-красный фон при наведении */
    }

    /* === Глобальные переменные (цвета, тени и т.д.) === */
    :root {
        --primary-color: #6a0dad;     /* Основной цвет сайта (фиолетовый) */
        --bg-light: #f8f9fa;          /* Светлый фон страницы */
        --text-dark: #333;            /* Цвет основного текста */
        --card-shadow: 0 2px 8px rgba(0,0,0,0.07); /* Тень для карточек */
    }

    /* === Обнуление стандартных стилей браузера === */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;       /* Чтобы padding не влиял на размер элементов */
    }

    /* === Базовые стили для всего сайта === */
    body {
        font-family: 'Segoe UI', sans-serif; /* Читаемый шрифт */
        background-color: var(--bg-light);   /* Фон из переменной */
        color: var(--text-dark);             /* Цвет текста из переменной */
        line-height: 1.6;                    /* Межстрочный интервал */
    }

    /* === Шапка сайта (header) === */
    .header {
        background-color: var(--primary-color); /* Фиолетовый фон */
        color: white;                          /* Белый текст */
        padding: 15px 30px;                    /* Отступы */
        display: flex;
        justify-content: space-between;         /* Раздвигаем логотип и меню */
        align-items: center;                   /* Центрируем по вертикали */
    }

    /* === Логотип сайта === */
    .logo {
        font-size: 1.5rem;                     /* Размер шрифта */
        font-weight: bold;                     /* Жирный текст */
        text-decoration: none;                 /* Без подчёркивания */
        color: white;                          /* Цвет логотипа */
    }

    /* === Поисковая панель === */
    .search-bar {
        display: flex;                         /* Располагаем элементы в строку */
        gap: 10px;                            /* Отступ между полем и кнопкой */
    }

    /* === Поле ввода поиска === */
    .search-bar input {
        padding: 10px;
        width: 300px;                         /* Ширина поля поиска */
        border: 1px solid #ccc;                /* Серая рамка */
        border-radius: 4px;                    /* Закруглённые углы */
    }

    /* === Кнопка поиска === */
    .search-bar button {
        padding: 10px 20px;
        background-color: #fff;                /* Белый фон кнопки */
        color: var(--primary-color);           /* Цвет текста — фиолетовый */
        border: none;                          /* Убираем стандартную рамку */
        border-radius: 4px;                    /* Закруглённые углы */
        cursor: pointer;                       /* Курсор в виде руки */
    }

    /* === Основной контент сайта (товары, категории и т.п.) === */
    .content {
        max-width: 1200px;                    /* Максимальная ширина контента */
        margin: 30px auto;                    /* Отступ сверху/снизу и центровка по горизонтали */
        padding: 0 20px;                     /* Внутренние отступы */
    }

    /* === Сетка товаров (адаптивная) === */
    .product-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 250px)); /* Карточки всегда шириной 250px */
        gap: 20px;                           /* Отступы между карточками */
    }

    /* === Карточка товара === */
    .product-card {
        background-color: white;               /* Белый фон карточки */
        border-radius: 8px;                    /* Закруглённые углы */
        overflow: hidden;                      /* Прячем части, выходящие за границы */
        box-shadow: var(--card-shadow);       /* Добавляем тень */
        transition: transform 0.3s ease;       /* Плавный эффект при наведении */
    }
 .category-card {
        background-color: white;               /* Белый фон карточки */
        border-radius: 8px;                    /* Закруглённые углы */
        overflow: hidden;                      /* Прячем части, выходящие за границы */
        box-shadow: var(--card-shadow);       /* Добавляем тень */
        transition: transform 0.3s ease;       /* Плавный эффект при наведении */
    }
  /* === Эффект при наведении на карточку товара === */
    .product-card:hover {
        transform: translateY(-5px);           /* Поднимаем карточку немного вверх */
    }

    /* === Эффект при наведении на карточку товара === */
    .category-card:hover {
        transform: translateY(-5px);           /* Поднимаем карточку немного вверх */
    }
    /* === Изображение товара в карточке === */
    .category-image {
        width: 100%;                         /* Ширина фото = ширине карточки */
        height: 200px;                       /* Высота фото */
        object-fit: cover;                    /* Обрезаем, чтобы заполнить область */
    }

    /* === Изображение товара в карточке === */
    .product-image {
        width: 100%;                         /* Ширина фото = ширине карточки */
        height: 200px;                       /* Высота фото */
        object-fit: cover;                    /* Обрезаем, чтобы заполнить область */
    }

    /* === Информация внутри карточки товара === */
    .product-info {
        padding: 15px;                       /* Внутренние отступы */
    }

    /* === Название товара === */
    .product-title {
        font-size: 1.2rem;                    /* Размер заголовка */
        margin-bottom: 10px;                  /* Отступ снизу */
    }

    /* === Цена товара === */
    .product-price {
        color: green;                         /* Цвет цены */
        font-weight: bold;                    /* Жирный текст */
    }

    /* === Пагинация (навигация по страницам) === */
    .pagination-nav {
        display: flex;
        justify-content: center;              /* Центрируем пагинацию */
        gap: 10px;                          /* Отступы между кнопками */
        margin-top: 30px;                    /* Отступ сверху */
    }

    /* === Ссылки и номера страниц в пагинации === */
    .pagination-nav a,
    .pagination-nav span {
        padding: 8px 12px;
        text-decoration: none;                /* Без подчёркивания */
        color: #333;                         /* Тёмный текст */
        border: 1px solid #ddd;               /* Лёгкая рамка */
        border-radius: 4px;                   /* Закруглённые углы */
    }

    /* === Активный номер страницы в пагинации === */
    .pagination-nav span.bolder {
        font-weight: bold;                    /* Делаем активный пункт жирным */
    }

    /* === Ссылка "Назад" === */
    .back-link {
        display: block;                       /* Делаем ссылку блочным элементом */
        margin: 20px 0 40px 0;              /* Отступы */
        text-align: center;                   /* Центрируем текст */
        font-size: 1rem;                      /* Размер шрифта */
        color: var(--primary-color);          /* Цвет ссылки — фиолетовый */
        text-decoration: none;                /* Без подчёркивания */
    }

    /* === Футер сайта (всегда внизу) === */
    .footer {
        background-color: #f1f3f5;            /* Светло-серый фон футера */
        text-align: left;                     /* Текст слева */
        padding: 40px 20px;                 /* Отступы вокруг футера */
        font-size: 0.9rem;                   /* Меньше размер шрифта */
        color: var(--primary-color);          /* Цвет текста — фиолетовый */
    }

    /* === Контейнер для содержимого футера === */
    .footer-container {
        max-width: 1200px;                   /* Максимальная ширина */
        margin: 0 auto;                      /* Центрируем */
        display: grid;
        grid-template-columns: repeat(4, 1fr);/* Четыре колонки одинаковой ширины */
        gap: 20px;                         /* Отступы между колонками */
    }

    /* === Заголовки в колонках футера === */
    .footer-col h3 {
        font-size: 1rem;                     /* Размер заголовка */
        margin-bottom: 10px;                 /* Отступ снизу */
    }

    /* === Списки ссылок в футере === */
    .footer-col ul {
        list-style: none;                    /* Убираем маркеры списка */
        padding-left: 0;                     /* Убираем внутренний отступ */
    }

    /* === Элементы списка в футере === */
    .footer-col ul li {
        margin-bottom: 8px;                  /* Отступ снизу у каждого пункта */
    }

    /* === Копирайт в нижней части === */
    .copyright {
        text-align: center;                  /* Центрируем текст */
        padding: 20px;                       /* Отступы */
        font-size: 0.85rem;                  /* Маленький шрифт */
        color: var(--primary-color);          /* Цвет текста — фиолетовый */
        border-top: 1px solid #ddd;           /* Горизонтальная линия сверху */
    }
</style>
</head>
<body>

<!-- Хедер сайта -->
<header class="header">
    <a href="#" class="logo">RGSU Wildberries</a>
    <div class="search-bar">
        <input type="text" id="search-input" placeholder="Поиск по названию или категории...">
        <button onclick="filterProducts()">Найти</button>
    </div>
</header>

<!-- Основной контент -->
<div class="content">
    <h1 style="text-align: center; margin-bottom: 20px;">{{ category.name }}</h1>

    <!-- Сетка товаров -->
    <div class="product-grid" id="product-grid">
        {% for product in page_obj %}
            <div class="product-card"
                 data-name="{{ product.name }}"
                 data-category="{{ product.category.name }}">
               {% if product.image %}
    <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-image">
{% endif %}
                <div class="product-info">
                    <div class="product-title">{{ product.name }}</div>
                    <div class="product-price">{{ product.price }} ₽</div>
                    <p>{{ product.description|truncatewords:10 }}</p>
                </div>
            </div>
        {% empty %}
            <p>Нет товаров в этой категории</p>
        {% endfor %}
    </div>

    <!-- Кнопка "Назад" -->
    <a href="{% url 'home' %}" class="back-link">← Назад к категориям</a>

    <!-- Пагинация -->
<!-- Пагинация -->
{% if page_obj.has_other_pages %}
<div class="pagination-nav">
    {% if page_obj.has_previous %}
        <a href="?page=1">&laquo; Первая</a>
        <a href="?page={{ page_obj.previous_page_number }}">← Предыдущая</a>
    {% endif %}

    {% for num in page_obj.paginator.page_range %}
        {% if num == page_obj.number %}
            <span class="bolder">{{ num }}</span>
        {% else %}
            <a href="?page={{ num }}">{{ num }}</a>
        {% endif %}
    {% endfor %}

    {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}">Следующая →</a>
        <a href="?page={{ page_obj.paginator.num_pages }}">Последняя &raquo;</a>
    {% endif %}
</div>
{% endif %}
<!-- Футер сайта -->
<footer class="footer">
    <div class="footer-container">
        <div class="footer-col">
            <h3>Покупателям</h3>
            <ul>
                <li><a href="#">Частые вопросы</a></li>
                <li><a href="#">Юридическая информация</a></li>
            </ul>
        </div>

        <div class="footer-col">
            <h3>Продавцам и партнёрам</h3>
            <ul>
                <li><a href="#">Продавать товары</a></li>
                <li><a href="#">Открыть пункт выдачи</a></li>
                <li><a href="#">Предложить помещение</a></li>
                <li><a href="#">Развозить грузы</a></li>
                <li><a href="#">Доставлять заказы</a></li>
            </ul>
        </div>

        <div class="footer-col">
            <h3>Наши проекты</h3>
            <ul>
                <li><a href="#">WB Guru</a></li>
                <li><a href="#">WB Stream</a></li>
                <li><a href="#">WB Track</a></li>
            </ul>
        </div>

        <div class="footer-col">
            <h3>Компания</h3>
            <ul>
                <li><a href="#">О нас</a></li>
                <li><a href="#">Пресс-служба</a></li>
                <li><a href="#">Контакты</a></li>
                <li><a href="#">Вакансии</a></li>
                <li><a href="#">Сообщить о мошенничестве</a></li>
                <li><a href="#">Социальные сети</a></li>
            </ul>
        </div>
    </div>

    <!-- Копирайт -->
    <div class="copyright">
        <p>© Wildberries 2004–2025. Все права защищены.</p>
        <p>Применяются рекомендательные технологии</p>
    </div>
</footer>

<!-- JS для поиска -->
<script>
    function filterProducts() {
        const query = document.getElementById('search-input').value.toLowerCase();
        const products = document.querySelectorAll('.product-card');

        products.forEach(product => {
            const name = product.getAttribute('data-name').toLowerCase();
            const category = product.getAttribute('data-category').toLowerCase();

            if (name.includes(query) || category.includes(query)) {
                product.style.display = 'block';
            } else {
                product.style.display = 'none';
            }
        });
    }
</script>

</body>
</html>